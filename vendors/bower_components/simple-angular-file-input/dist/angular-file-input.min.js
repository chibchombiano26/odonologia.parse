(function(){"use strict";angular.module("angularFileInput",[]).directive("ngFileInput",["$compile","$http","$templateCache","$parse",function(e,t,n){return{restrict:"E",require:"?ngModel",scope:{callback:"&",mode:"@",tmpl:"="},template:'<input ng-hide="tmpl" type="file" />',link:function(a,i,r,l){function c(e){var t=e.split("data:")[1],n=t.split(";"),a=n[0]||"text/plain",i=n[1].split(","),r=i[0],l=i[1];return{mimetype:a,encoding:r,content:l}}function u(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){var n=e.target.result,i={};"data-url"==a.mode?i=c(n):i.content=n,i.name=t.name,i.size=t.size,a.content=i,a.callback({file:i}),l&&l.$setViewValue(i),a.$apply()},a.mode||(a.mode="data-url"),n["readAs"+d[a.mode]]&&n["readAs"+d[a.mode]](t)}}var o=i.find("input")[0],d={"array-buffer":"ArrayBuffer","binary-string":"BinaryString","data-url":"DataURL",text:"Text"};o.addEventListener("change",u,!1),a.tmpl&&t.get(a.tmpl,{cache:n}).then(function(t){var n=t.data,r=angular.element(n);r[0].onclick=function(){o.click()},e(r)(a),i.append(r)})}}}])}).call(this);