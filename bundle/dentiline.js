angular.module("odontologiaApp").controller("fbImagesCtrl",function(e,t,n,r,o){function a(){n.getImages().then(function(t){e.data=t})}function i(e){var t=o.defer();return r.upload(e,"xD0UaXP8pBQ0TIR").then(function(e){console.log("Your adorable cat be here: "+e.link),t.resolve(e)}),t.promise}e.data=[],r.setAPIKey("Client-ID d17cf745c618359");var l="CAAXqi2mgmHkBAEWK3hOMUbbbCFyugVesg0rtZB20zqAZCMeispKOrL6oIO3AWZAYnEDadPL5fy7G6twk3oJSOWWmEWUFA5ZAKvzPreZBMsCZC8Q5nSBqhF3ISZCBoiQRaNuv7rF0GntE8VJIecdEoxWL7TaKfAP0KFTMYwcX3fT4yldzl3bnCLp";e.fileLoaded=function(t){i(t).then(function(t){n.postImage(t.link,l).then(function(t){e.data.push(t)})})},a()}),angular.module("odontologiaApp").service("fbHefesoftService",function(e){var t={};return t.getImageById=function(t,n){var r=e.defer(),o="/"+t;return FB.api(o,"GET",{access_token:n,fields:"name,link,images"},function(e){e&&!e.error&&r.resolve(e)}),r.promise},t.postImage=function(n,r){var o=e.defer();return FB.api("/1491345774500031/photos","POST",{url:n,access_token:r},function(e){e&&!e.error&&t.getImageById(e.id,r).then(function(e){o.resolve(e)})}),o.promise},t.getImages=function(){var t=e.defer();return FB.api("/1491345774500031/photos","GET",{fields:"images,comments{message}",access_token:"1665259377039481|sFBCPhvzZ0hYVZHJYZblYBV_yi8"},function(e){e&&!e.error&&t.resolve(e.data)}),t.promise},t})(function(e,t,n){"use strict";function r(e,t,n){var r,o=e.runtimeStyle&&e.runtimeStyle[t],a=e.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(r=a.left,o&&(e.runtimeStyle.left=e.currentStyle.left),a.left="fontSize"===t?"1em":n||0,n=a.pixelLeft+"px",a.left=r,o&&(e.runtimeStyle.left=o)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function o(e){return parseInt(e,10)}function a(e,t,o,a){if(e=(e||"").split(","),e=e[a||0]||e[0]||"auto",e=d.Util.trimText(e).split(" "),"backgroundSize"!==o||e[0]&&!e[0].match(/cover|contain|auto/)){if(e[0]=-1===e[0].indexOf("%")?r(t,o+"X",e[0]):e[0],e[1]===n){if("backgroundSize"===o)return e[1]="auto",e;e[1]=e[0]}e[1]=-1===e[1].indexOf("%")?r(t,o+"Y",e[1]):e[1]}return e}function i(e,t,n,r,o,a){var i,l,s,c,u=d.Util.getCSS(t,e,o);if(1===u.length&&(c=u[0],u=[],u[0]=c,u[1]=c),-1!==(""+u[0]).indexOf("%"))s=parseFloat(u[0])/100,l=n.width*s,"backgroundSize"!==e&&(l-=(a||r).width*s);else if("backgroundSize"===e)if("auto"===u[0])l=r.width;else if(/contain|cover/.test(u[0])){var h=d.Util.resizeBounds(r.width,r.height,n.width,n.height,u[0]);l=h.width,i=h.height}else l=parseInt(u[0],10);else l=parseInt(u[0],10);return"auto"===u[1]?i=l/r.width*r.height:-1!==(""+u[1]).indexOf("%")?(s=parseFloat(u[1])/100,i=n.height*s,"backgroundSize"!==e&&(i-=(a||r).height*s)):i=parseInt(u[1],10),[l,i]}function l(e,t){var n=[];return{storage:n,width:e,height:t,clip:function(){n.push({type:"function",name:"clip",arguments:arguments})},translate:function(){n.push({type:"function",name:"translate",arguments:arguments})},fill:function(){n.push({type:"function",name:"fill",arguments:arguments})},save:function(){n.push({type:"function",name:"save",arguments:arguments})},restore:function(){n.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){n.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){n.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var e=[];return n.push({type:"function",name:"drawShape",arguments:e}),{moveTo:function(){e.push({name:"moveTo",arguments:arguments})},lineTo:function(){e.push({name:"lineTo",arguments:arguments})},arcTo:function(){e.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){e.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){e.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){n.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){n.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(e,t){return n.push({type:"variable",name:e,arguments:t}),t}}}function s(e){return{zindex:e,children:[]}}var c,u,d={};d.Util={},d.Util.log=function(t){d.logging&&e.console&&e.console.log&&e.console.log(t)},d.Util.trimText=function(e){return function(t){return e?e.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}}(String.prototype.trim),d.Util.asFloat=function(e){return parseFloat(e)},function(){var e=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,t=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;d.Util.parseTextShadows=function(n){if(!n||"none"===n)return[];for(var r=n.match(e),o=[],a=0;r&&r.length>a;a++){var i=r[a].match(t);o.push({color:i[0],offsetX:i[1]?i[1].replace("px",""):0,offsetY:i[2]?i[2].replace("px",""):0,blur:i[3]?i[3].replace("px",""):0})}return o}}(),d.Util.parseBackgroundImage=function(e){var t,n,r,o,a,i,l,s,c=" \r\n	",u=[],d=0,h=0,f=function(){t&&('"'===n.substr(0,1)&&(n=n.substr(1,n.length-2)),n&&s.push(n),"-"===t.substr(0,1)&&(o=t.indexOf("-",1)+1)>0&&(r=t.substr(0,o),t=t.substr(o)),u.push({prefix:r,method:t.toLowerCase(),value:a,args:s})),s=[],t=r=n=a=""};f();for(var p=0,g=e.length;g>p;p++)if(i=e[p],!(0===d&&c.indexOf(i)>-1)){switch(i){case'"':l?l===i&&(l=null):l=i;break;case"(":if(l)break;if(0===d){d=1,a+=i;continue}h++;break;case")":if(l)break;if(1===d){if(0===h){d=0,a+=i,f();continue}h--}break;case",":if(l)break;if(0===d){f();continue}if(1===d&&0===h&&!t.match(/^url$/i)){s.push(n),n="",a+=i;continue}}a+=i,0===d?t+=i:n+=i}return f(),u},d.Util.Bounds=function(e){var t,n={};return e.getBoundingClientRect&&(t=e.getBoundingClientRect(),n.top=t.top,n.bottom=t.bottom||t.top+t.height,n.left=t.left,n.width=e.offsetWidth,n.height=e.offsetHeight),n},d.Util.OffsetBounds=function(e){var t=e.offsetParent?d.Util.OffsetBounds(e.offsetParent):{top:0,left:0};return{top:e.offsetTop+t.top,bottom:e.offsetTop+e.offsetHeight+t.top,left:e.offsetLeft+t.left,width:e.offsetWidth,height:e.offsetHeight}},d.Util.getCSS=function(e,n,r){c!==e&&(u=t.defaultView.getComputedStyle(e,null));var i=u[n];if(/^background(Size|Position)$/.test(n))return a(i,e,n,r);if(/border(Top|Bottom)(Left|Right)Radius/.test(n)){var l=i.split(" ");return 1>=l.length&&(l[1]=l[0]),l.map(o)}return i},d.Util.resizeBounds=function(e,t,n,r,o){var a,i,l=n/r,s=e/t;return o&&"auto"!==o?s>l^"contain"===o?(i=r,a=r*s):(a=n,i=n/s):(a=n,i=r),{width:a,height:i}},d.Util.BackgroundPosition=function(e,t,n,r,o){var a=i("backgroundPosition",e,t,n,r,o);return{left:a[0],top:a[1]}},d.Util.BackgroundSize=function(e,t,n,r){var o=i("backgroundSize",e,t,n,r);return{width:o[0],height:o[1]}},d.Util.Extend=function(e,t){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},d.Util.Children=function(e){var t;try{t=e.nodeName&&"IFRAME"===e.nodeName.toUpperCase()?e.contentDocument||e.contentWindow.document:function(e){var t=[];return null!==e&&function(e,t){var r=e.length,o=0;if("number"==typeof t.length)for(var a=t.length;a>o;o++)e[r++]=t[o];else for(;t[o]!==n;)e[r++]=t[o++];return e.length=r,e}(t,e),t}(e.childNodes)}catch(r){d.Util.log("html2canvas.Util.Children failed with exception: "+r.message),t=[]}return t},d.Util.isTransparent=function(e){return"transparent"===e||"rgba(0, 0, 0, 0)"===e},d.Util.Font=function(){var e={};return function(t,r,o){if(e[t+"-"+r]!==n)return e[t+"-"+r];var a,i,l,s=o.createElement("div"),c=o.createElement("img"),u=o.createElement("span"),d="Hidden Text";return s.style.visibility="hidden",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin=0,s.style.padding=0,o.body.appendChild(s),c.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",c.width=1,c.height=1,c.style.margin=0,c.style.padding=0,c.style.verticalAlign="baseline",u.style.fontFamily=t,u.style.fontSize=r,u.style.margin=0,u.style.padding=0,u.appendChild(o.createTextNode(d)),s.appendChild(u),s.appendChild(c),a=c.offsetTop-u.offsetTop+1,s.removeChild(u),s.appendChild(o.createTextNode(d)),s.style.lineHeight="normal",c.style.verticalAlign="super",i=c.offsetTop-s.offsetTop+1,l={baseline:a,lineWidth:1,middle:i},e[t+"-"+r]=l,o.body.removeChild(s),l}}(),function(){function e(e){return function(t){try{e.addColorStop(t.stop,t.color)}catch(r){n.log(["failed to add color stop: ",r,"; tried to add: ",t])}}}var n=d.Util,r={};d.Generate=r;var o=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];r.parseGradient=function(e,t){var n,r,a,i,l,s,c,u,d,h,f,p,g=o.length;for(r=0;g>r&&!(a=e.match(o[r]));r+=1);if(a)switch(a[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},l=a[2].match(/\w+/g))for(s=l.length,r=0;s>r;r+=1)switch(l[r]){case"top":n.y0=0,n.y1=t.height;break;case"right":n.x0=t.width,n.x1=0;break;case"bottom":n.y0=t.height,n.y1=0;break;case"left":n.x0=0,n.x1=t.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=t.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=t.height/2),l=a[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(s=l.length,c=1/Math.max(s-1,1),r=0;s>r;r+=1)u=l[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(i=parseFloat(u[2]),i/="%"===u[3]?100:t.width):i=r*c,n.colorStops.push({color:u[1],stop:i});break;case"-webkit-gradient":if(n={type:"radial"===a[2]?"circle":a[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},l=a[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/),l&&(n.x0=l[1]*t.width/100,n.y0=l[2]*t.height/100,n.x1=l[3]*t.width/100,n.y1=l[4]*t.height/100),l=a[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(s=l.length,r=0;s>r;r+=1)u=l[r].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),i=parseFloat(u[2]),"from"===u[1]&&(i=0),"to"===u[1]&&(i=1),n.colorStops.push({color:u[3],stop:i});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},l=a[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),l&&(n.x0=l[1]*t.width/100,n.y0=l[2]*t.height/100,n.x1=t.width-n.x0,n.y1=t.height-n.y0),l=a[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(s=l.length,c=1/Math.max(s-1,1),r=0;s>r;r+=1)u=l[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/),u[2]?(i=parseFloat(u[2]),u[3]&&(i/=100)):i=r*c,n.colorStops.push({color:u[1],stop:i});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:t.width,y1:t.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},l=a[2].match(/(\d{1,3})%?\s(\d{1,3})%?/),l&&(n.cx=l[1]*t.width/100,n.cy=l[2]*t.height/100),l=a[3].match(/\w+/),u=a[4].match(/[a-z\-]*/),l&&u)switch(u[0]){case"farthest-corner":case"cover":case"":d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(d,h,f,p);break;case"closest-corner":d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),h=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),f=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),p=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(d,h,f,p);break;case"farthest-side":"circle"===l[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=l[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===l[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=l[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(l=a[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(s=l.length,c=1/Math.max(s-1,1),r=0;s>r;r+=1)u=l[r].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/),u[2]?(i=parseFloat(u[2]),i/="%"===u[3]?100:t.width):i=r*c,n.colorStops.push({color:u[1],stop:i})}return n},r.Gradient=function(n,r){if(0!==r.width&&0!==r.height){var o,a,i=t.createElement("canvas"),l=i.getContext("2d");if(i.width=r.width,i.height=r.height,o=d.Generate.parseGradient(n,r))switch(o.type){case"linear":a=l.createLinearGradient(o.x0,o.y0,o.x1,o.y1),o.colorStops.forEach(e(a)),l.fillStyle=a,l.fillRect(0,0,r.width,r.height);break;case"circle":a=l.createRadialGradient(o.cx,o.cy,0,o.cx,o.cy,o.rx),o.colorStops.forEach(e(a)),l.fillStyle=a,l.fillRect(0,0,r.width,r.height);break;case"ellipse":var s=t.createElement("canvas"),c=s.getContext("2d"),u=Math.max(o.rx,o.ry),h=2*u;s.width=s.height=h,a=c.createRadialGradient(o.rx,o.ry,0,o.rx,o.ry,u),o.colorStops.forEach(e(a)),c.fillStyle=a,c.fillRect(0,0,h,h),l.fillStyle=o.colorStops[o.colorStops.length-1].color,l.fillRect(0,0,i.width,i.height),l.drawImage(s,o.cx-o.rx,o.cy-o.ry,2*o.rx,2*o.ry)}return i}},r.ListAlpha=function(e){var t,n="";do t=e%26,n=String.fromCharCode(t+64)+n,e/=26;while(26*e>26);return n},r.ListRoman=function(e){var t,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],r=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],o="",a=n.length;if(0>=e||e>=4e3)return e;for(t=0;a>t;t+=1)for(;e>=r[t];)e-=r[t],o+=n[t];return o}}(),d.Parse=function(r,o){function a(){return Math.max(Math.max(ue.body.scrollWidth,ue.documentElement.scrollWidth),Math.max(ue.body.offsetWidth,ue.documentElement.offsetWidth),Math.max(ue.body.clientWidth,ue.documentElement.clientWidth))}function i(){return Math.max(Math.max(ue.body.scrollHeight,ue.documentElement.scrollHeight),Math.max(ue.body.offsetHeight,ue.documentElement.offsetHeight),Math.max(ue.body.clientHeight,ue.documentElement.clientHeight))}function c(e,t){var n=parseInt(ge(e,t),10);return isNaN(n)?0:n}function u(e,t,n,r,o,a){"transparent"!==a&&(e.setVariable("fillStyle",a),e.fillRect(t,n,r,o),ce+=1)}function h(e,t,r){return e.length>0?t+r.toUpperCase():n}function f(e,t){switch(t){case"lowercase":return e.toLowerCase();case"capitalize":return e.replace(/(^|\s|:|-|\(|\))([a-z])/g,h);case"uppercase":return e.toUpperCase();default:return e}}function p(e){return/^(normal|none|0px)$/.test(e)}function g(e,t,n,r){null!==e&&de.trimText(e).length>0&&(r.fillText(e,t,n),ce+=1)}function m(e,t,r,o){var a=!1,i=ge(t,"fontWeight"),l=ge(t,"fontFamily"),s=ge(t,"fontSize"),c=de.parseTextShadows(ge(t,"textShadow"));switch(parseInt(i,10)){case 401:i="bold";break;case 400:i="normal"}return e.setVariable("fillStyle",o),e.setVariable("font",[ge(t,"fontStyle"),ge(t,"fontVariant"),i,s,l].join(" ")),e.setVariable("textAlign",a?"right":"left"),c.length&&(e.setVariable("shadowColor",c[0].color),e.setVariable("shadowOffsetX",c[0].offsetX),e.setVariable("shadowOffsetY",c[0].offsetY),e.setVariable("shadowBlur",c[0].blur)),"none"!==r?de.Font(l,s,ue):n}function y(e,t,n,r,o){switch(t){case"underline":u(e,n.left,Math.round(n.top+r.baseline+r.lineWidth),n.width,1,o);break;case"overline":u(e,n.left,Math.round(n.top),n.width,1,o);break;case"line-through":u(e,n.left,Math.ceil(n.top+r.middle+r.lineWidth),n.width,1,o)}}function v(e,t,n,r,o){var a;if(he.rangeBounds&&!o)("none"!==n||0!==de.trimText(t).length)&&(a=b(t,e.node,e.textOffset)),e.textOffset+=t.length;else if(e.node&&"string"==typeof e.node.nodeValue){var i=r?e.node.splitText(t.length):null;a=x(e.node,o),e.node=i}return a}function b(e,t,n){var r=ue.createRange();return r.setStart(t,n),r.setEnd(t,n+e.length),r.getBoundingClientRect()}function x(e,t){var n=e.parentNode,r=ue.createElement("wrapper"),o=e.cloneNode(!0);r.appendChild(e.cloneNode(!0)),n.replaceChild(r,e);var a=t?de.OffsetBounds(r):de.Bounds(r);return n.replaceChild(o,r),a}function w(e,t,n){var r,a,i=n.ctx,l=ge(e,"color"),s=ge(e,"textDecoration"),c=ge(e,"textAlign"),u={node:t,textOffset:0};de.trimText(t.nodeValue).length>0&&(t.nodeValue=f(t.nodeValue,ge(e,"textTransform")),c=c.replace(["-webkit-auto"],["auto"]),a=!o.letterRendering&&/^(left|right|justify|auto)$/.test(c)&&p(ge(e,"letterSpacing"))?t.nodeValue.split(/(\b| )/):t.nodeValue.split(""),r=m(i,e,s,l),o.chinese&&a.forEach(function(e,t){/.*[\u4E00-\u9FA5].*$/.test(e)&&(e=e.split(""),e.unshift(t,1),a.splice.apply(a,e))}),a.forEach(function(e,t){var o=v(u,e,s,a.length-1>t,n.transform.matrix);o&&(g(e,o.left,o.bottom,i),y(i,s,o,r,l))}))}function C(e,t){var n,r,o=ue.createElement("boundelement");return o.style.display="inline",n=e.style.listStyleType,e.style.listStyleType="none",o.appendChild(ue.createTextNode(t)),e.insertBefore(o,e.firstChild),r=de.Bounds(o),e.removeChild(o),e.style.listStyleType=n,r}function T(e){var t=-1,n=1,r=e.parentNode.childNodes;if(e.parentNode){for(;r[++t]!==e;)1===r[t].nodeType&&n++;return n}return-1}function k(e,t){var n,r=T(e);switch(t){case"decimal":n=r;break;case"decimal-leading-zero":n=1===(""+r).length?r="0"+r:""+r;break;case"upper-roman":n=d.Generate.ListRoman(r);break;case"lower-roman":n=d.Generate.ListRoman(r).toLowerCase();break;case"lower-alpha":n=d.Generate.ListAlpha(r).toLowerCase();break;case"upper-alpha":n=d.Generate.ListAlpha(r)}return n+". "}function S(e,t,n){var r,o,a,i=t.ctx,l=ge(e,"listStyleType");if(/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(l)){if(o=k(e,l),a=C(e,o),m(i,e,"none",ge(e,"color")),"inside"!==ge(e,"listStylePosition"))return;i.setVariable("textAlign","left"),r=n.left,g(o,r,a.bottom,i)}}function E(e){var t=r[e];return t&&t.succeeded===!0?t.img:!1}function I(e,t){var n=Math.max(e.left,t.left),r=Math.max(e.top,t.top),o=Math.min(e.left+e.width,t.left+t.width),a=Math.min(e.top+e.height,t.top+t.height);return{left:n,top:r,width:o-n,height:a-r}}function M(e,t,n){var r,o="static"!==t.cssPosition,a=o?ge(e,"zIndex"):"auto",i=ge(e,"opacity"),l="none"!==ge(e,"cssFloat");t.zIndex=r=s(a),r.isPositioned=o,r.isFloated=l,r.opacity=i,r.ownStacking="auto"!==a||1>i,n&&n.zIndex.children.push(t)}function R(e,t,n,r,o){var a=c(t,"paddingLeft"),i=c(t,"paddingTop"),l=c(t,"paddingRight"),s=c(t,"paddingBottom");V(e,n,0,0,n.width,n.height,r.left+a+o[3].width,r.top+i+o[0].width,r.width-(o[1].width+o[3].width+a+l),r.height-(o[0].width+o[2].width+i+s))}function L(e){return["Top","Right","Bottom","Left"].map(function(t){return{width:c(e,"border"+t+"Width"),color:ge(e,"border"+t+"Color")}})}function O(e){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return ge(e,"border"+t+"Radius")})}function A(e,t,n,r){var o=function(e,t,n){return{x:e.x+(t.x-e.x)*n,y:e.y+(t.y-e.y)*n}};return{start:e,startControl:t,endControl:n,end:r,subdivide:function(a){var i=o(e,t,a),l=o(t,n,a),s=o(n,r,a),c=o(i,l,a),u=o(l,s,a),d=o(c,u,a);return[A(e,i,c,d),A(d,u,s,r)]},curveTo:function(e){e.push(["bezierCurve",t.x,t.y,n.x,n.y,r.x,r.y])},curveToReversed:function(r){r.push(["bezierCurve",n.x,n.y,t.x,t.y,e.x,e.y])}}}function P(e,t,n,r,o,a,i){t[0]>0||t[1]>0?(e.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(e),r[1].curveTo(e)):e.push(["line",a,i]),(n[0]>0||n[1]>0)&&e.push(["line",o[0].start.x,o[0].start.y])}function B(e,t,n,r,o,a,i){var l=[];return t[0]>0||t[1]>0?(l.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(l)):l.push(["line",e.c1[0],e.c1[1]]),n[0]>0||n[1]>0?(l.push(["line",a[0].start.x,a[0].start.y]),a[0].curveTo(l),l.push(["line",i[0].end.x,i[0].end.y]),i[0].curveToReversed(l)):(l.push(["line",e.c2[0],e.c2[1]]),l.push(["line",e.c3[0],e.c3[1]])),t[0]>0||t[1]>0?(l.push(["line",o[1].end.x,o[1].end.y]),o[1].curveToReversed(l)):l.push(["line",e.c4[0],e.c4[1]]),l}function U(e,t,n){var r=e.left,o=e.top,a=e.width,i=e.height,l=t[0][0],s=t[0][1],c=t[1][0],u=t[1][1],d=t[2][0],h=t[2][1],f=t[3][0],p=t[3][1],g=a-c,m=i-h,y=a-d,v=i-p;return{topLeftOuter:ve(r,o,l,s).topLeft.subdivide(.5),topLeftInner:ve(r+n[3].width,o+n[0].width,Math.max(0,l-n[3].width),Math.max(0,s-n[0].width)).topLeft.subdivide(.5),topRightOuter:ve(r+g,o,c,u).topRight.subdivide(.5),topRightInner:ve(r+Math.min(g,a+n[3].width),o+n[0].width,g>a+n[3].width?0:c-n[3].width,u-n[0].width).topRight.subdivide(.5),bottomRightOuter:ve(r+y,o+m,d,h).bottomRight.subdivide(.5),bottomRightInner:ve(r+Math.min(y,a+n[3].width),o+Math.min(m,i+n[0].width),Math.max(0,d-n[1].width),Math.max(0,h-n[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:ve(r,o+v,f,p).bottomLeft.subdivide(.5),bottomLeftInner:ve(r+n[3].width,o+v,Math.max(0,f-n[3].width),Math.max(0,p-n[2].width)).bottomLeft.subdivide(.5)}}function z(e,t,n,r,o){var a=ge(e,"backgroundClip"),i=[];switch(a){case"content-box":case"padding-box":P(i,r[0],r[1],t.topLeftInner,t.topRightInner,o.left+n[3].width,o.top+n[0].width),P(i,r[1],r[2],t.topRightInner,t.bottomRightInner,o.left+o.width-n[1].width,o.top+n[0].width),P(i,r[2],r[3],t.bottomRightInner,t.bottomLeftInner,o.left+o.width-n[1].width,o.top+o.height-n[2].width),P(i,r[3],r[0],t.bottomLeftInner,t.topLeftInner,o.left+n[3].width,o.top+o.height-n[2].width);break;default:P(i,r[0],r[1],t.topLeftOuter,t.topRightOuter,o.left,o.top),P(i,r[1],r[2],t.topRightOuter,t.bottomRightOuter,o.left+o.width,o.top),P(i,r[2],r[3],t.bottomRightOuter,t.bottomLeftOuter,o.left+o.width,o.top+o.height),P(i,r[3],r[0],t.bottomLeftOuter,t.topLeftOuter,o.left,o.top+o.height)}return i}function $(e,t,n){var r,o,a,i,l,s,c=t.left,u=t.top,d=t.width,h=t.height,f=O(e),p=U(t,f,n),g={clip:z(e,p,n,f,t),borders:[]};for(r=0;4>r;r++)if(n[r].width>0){switch(o=c,a=u,i=d,l=h-n[2].width,r){case 0:l=n[0].width,s=B({c1:[o,a],c2:[o+i,a],c3:[o+i-n[1].width,a+l],c4:[o+n[3].width,a+l]},f[0],f[1],p.topLeftOuter,p.topLeftInner,p.topRightOuter,p.topRightInner);break;case 1:o=c+d-n[1].width,i=n[1].width,s=B({c1:[o+i,a],c2:[o+i,a+l+n[2].width],c3:[o,a+l],c4:[o,a+n[0].width]},f[1],f[2],p.topRightOuter,p.topRightInner,p.bottomRightOuter,p.bottomRightInner);break;case 2:a=a+h-n[2].width,l=n[2].width,s=B({c1:[o+i,a+l],c2:[o,a+l],c3:[o+n[3].width,a],c4:[o+i-n[3].width,a]},f[2],f[3],p.bottomRightOuter,p.bottomRightInner,p.bottomLeftOuter,p.bottomLeftInner);break;case 3:i=n[3].width,s=B({c1:[o,a+l+n[2].width],c2:[o,a],c3:[o+i,a+n[0].width],c4:[o+i,a+l]},f[3],f[0],p.bottomLeftOuter,p.bottomLeftInner,p.topLeftOuter,p.topLeftInner)}g.borders.push({args:s,color:n[r].color})}return g}function F(e,t){var n=e.drawShape();return t.forEach(function(e,t){n[0===t?"moveTo":e[0]+"To"].apply(null,e.slice(1))}),n}function N(e,t,n){"transparent"!==n&&(e.setVariable("fillStyle",n),F(e,t),e.fill(),ce+=1)}function j(e,t,n){var r,o,a=ue.createElement("valuewrap"),i=["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"];i.forEach(function(t){try{a.style[t]=ge(e,t)}catch(n){de.log("html2canvas: Parse: Exception caught in renderFormValue: "+n.message)}}),a.style.borderColor="black",a.style.borderStyle="solid",a.style.display="block",a.style.position="absolute",(/^(submit|reset|button|text|password)$/.test(e.type)||"SELECT"===e.nodeName)&&(a.style.lineHeight=ge(e,"height")),a.style.top=t.top+"px",a.style.left=t.left+"px",r="SELECT"===e.nodeName?(e.options[e.selectedIndex]||0).text:e.value,r||(r=e.placeholder),o=ue.createTextNode(r),a.appendChild(o),pe.appendChild(a),w(e,o,n),pe.removeChild(a)}function V(e){e.drawImage.apply(e,Array.prototype.slice.call(arguments,1)),ce+=1}function D(n,r){var o=e.getComputedStyle(n,r);if(o&&o.content&&"none"!==o.content&&"-moz-alt-content"!==o.content&&"none"!==o.display){var a=o.content+"",i=a.substr(0,1);i===a.substr(a.length-1)&&i.match(/'|"/)&&(a=a.substr(1,a.length-2));var l="url"===a.substr(0,3),s=t.createElement(l?"img":"span");return s.className=me+"-before "+me+"-after",Object.keys(o).filter(H).forEach(function(e){try{s.style[e]=o[e]}catch(t){de.log(["Tried to assign readonly property ",e,"Error:",t])}}),l?s.src=de.parseBackgroundImage(a)[0].args[0]:s.innerHTML=a,s}}function H(t){return isNaN(e.parseInt(t,10))}function q(e,t){var n=D(e,":before"),r=D(e,":after");(n||r)&&(n&&(e.className+=" "+me+"-before",e.parentNode.insertBefore(n,e),ae(n,t,!0),e.parentNode.removeChild(n),e.className=e.className.replace(me+"-before","").trim()),r&&(e.className+=" "+me+"-after",e.appendChild(r),ae(r,t,!0),e.removeChild(r),e.className=e.className.replace(me+"-after","").trim()))}function G(e,t,n,r){var o=Math.round(r.left+n.left),a=Math.round(r.top+n.top);e.createPattern(t),e.translate(o,a),e.fill(),e.translate(-o,-a)}function W(e,t,n,r,o,a,i,l){var s=[];s.push(["line",Math.round(o),Math.round(a)]),s.push(["line",Math.round(o+i),Math.round(a)]),s.push(["line",Math.round(o+i),Math.round(l+a)]),s.push(["line",Math.round(o),Math.round(l+a)]),F(e,s),e.save(),e.clip(),G(e,t,n,r),e.restore()}function _(e,t,n){u(e,t.left,t.top,t.width,t.height,n)}function X(e,t,n,r,o){var a=de.BackgroundSize(e,t,r,o),i=de.BackgroundPosition(e,t,r,o,a),l=ge(e,"backgroundRepeat").split(",").map(de.trimText);switch(r=Z(r,a),l=l[o]||l[0]){case"repeat-x":W(n,r,i,t,t.left,t.top+i.top,99999,r.height);break;case"repeat-y":W(n,r,i,t,t.left+i.left,t.top,r.width,99999);break;case"no-repeat":W(n,r,i,t,t.left+i.left,t.top+i.top,r.width,r.height);break;default:G(n,r,i,{top:t.top,left:t.left,width:r.width,height:r.height})}}function Y(e,t,n){for(var r,o=ge(e,"backgroundImage"),a=de.parseBackgroundImage(o),i=a.length;i--;)if(o=a[i],o.args&&0!==o.args.length){var l="url"===o.method?o.args[0]:o.value;r=E(l),r?X(e,t,n,r,i):de.log("html2canvas: Error loading background:",o)}}function Z(e,t){if(e.width===t.width&&e.height===t.height)return e;var n,r=ue.createElement("canvas");return r.width=t.width,r.height=t.height,n=r.getContext("2d"),V(n,e,0,0,e.width,e.height,0,0,t.width,t.height),r}function J(e,t,n){return e.setVariable("globalAlpha",ge(t,"opacity")*(n?n.opacity:1))}function Q(e){return e.replace("px","")}function K(e){var t=ge(e,"transform")||ge(e,"-webkit-transform")||ge(e,"-moz-transform")||ge(e,"-ms-transform")||ge(e,"-o-transform"),n=ge(e,"transform-origin")||ge(e,"-webkit-transform-origin")||ge(e,"-moz-transform-origin")||ge(e,"-ms-transform-origin")||ge(e,"-o-transform-origin")||"0px 0px";n=n.split(" ").map(Q).map(de.asFloat);var r;if(t&&"none"!==t){var o=t.match(be);if(o)switch(o[1]){case"matrix":r=o[2].split(",").map(de.trimText).map(de.asFloat)}}return{origin:n,matrix:r}}function ee(e,t,n,r){var s=l(t?n.width:a(),t?n.height:i()),c={ctx:s,opacity:J(s,e,t),cssPosition:ge(e,"position"),borders:L(e),transform:r,clip:t&&t.clip?de.Extend({},t.clip):null};return M(e,c,t),o.useOverflow===!0&&/(hidden|scroll|auto)/.test(ge(e,"overflow"))===!0&&/(BODY)/i.test(e.nodeName)===!1&&(c.clip=c.clip?I(c.clip,n):n),c}function te(e,t,n){var r={left:t.left+e[3].width,top:t.top+e[0].width,width:t.width-(e[1].width+e[3].width),height:t.height-(e[0].width+e[2].width)};return n&&(r=I(r,n)),r}function ne(e,t){var n=t.matrix?de.OffsetBounds(e):de.Bounds(e);return t.origin[0]+=n.left,t.origin[1]+=n.top,n}function re(e,t,n,r){var o,a=K(e,t),i=ne(e,a),l=ee(e,t,i,a),s=l.borders,c=l.ctx,u=te(s,i,l.clip),d=$(e,i,s),h=fe.test(e.nodeName)?"#efefef":ge(e,"backgroundColor");switch(F(c,d.clip),c.save(),c.clip(),u.height>0&&u.width>0&&!r?(_(c,i,h),Y(e,u,c)):r&&(l.backgroundColor=h),c.restore(),d.borders.forEach(function(e){N(c,e.args,e.color)}),n||q(e,l),e.nodeName){case"IMG":(o=E(e.getAttribute("src")))?R(c,e,o,i,s):de.log("html2canvas: Error loading <img>:"+e.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(e.type)&&(e.value||e.placeholder||"").length>0&&j(e,i,l);break;case"TEXTAREA":(e.value||e.placeholder||"").length>0&&j(e,i,l);break;case"SELECT":(e.options||e.placeholder||"").length>0&&j(e,i,l);break;case"LI":S(e,l,u);break;case"CANVAS":R(c,e,e,i,s)}return l}function oe(e){return"none"!==ge(e,"display")&&"hidden"!==ge(e,"visibility")&&!e.hasAttribute("data-html2canvas-ignore")}function ae(e,t,n){oe(e)&&(t=re(e,t,n,!1)||t,fe.test(e.nodeName)||ie(e,t,n))}function ie(e,t,n){de.Children(e).forEach(function(r){r.nodeType===r.ELEMENT_NODE?ae(r,t,n):r.nodeType===r.TEXT_NODE&&w(e,r,t)})}function le(){var e=ge(t.documentElement,"backgroundColor"),n=de.isTransparent(e)&&se===t.body,r=re(se,null,!1,n);return ie(se,r),n&&(e=r.backgroundColor),pe.removeChild(ye),{backgroundColor:e,stack:r}}e.scroll(0,0);var se=o.elements===n?t.body:o.elements[0],ce=0,ue=se.ownerDocument,de=d.Util,he=de.Support(o,ue),fe=RegExp("("+o.ignoreElements+")"),pe=ue.body,ge=de.getCSS,me="___html2canvas___pseudoelement",ye=ue.createElement("style");ye.innerHTML="."+me+'-before:before { content: "" !important; display: none !important; }.'+me+'-after:after { content: "" !important; display: none !important; }',pe.appendChild(ye),r=r||{};var ve=function(e){return function(t,n,r,o){var a=r*e,i=o*e,l=t+r,s=n+o;return{topLeft:A({x:t,y:s},{x:t,y:s-i},{x:l-a,y:n},{x:l,y:n}),topRight:A({x:t,y:n},{x:t+a,y:n},{x:l,y:s-i},{x:l,y:s}),bottomRight:A({x:l,y:n},{x:l,y:n+i},{x:t+a,y:s},{x:t,y:s}),bottomLeft:A({x:l,y:s},{x:l-a,y:s},{x:t,y:n+i},{x:t,y:n})}}}(4*((Math.sqrt(2)-1)/3)),be=/(matrix)\((.+)\)/;return le()},d.Preload=function(r){function o(e){E.href=e,E.href=E.href;var t=E.protocol+E.host;return t===g}function a(){x.log("html2canvas: start: images: "+b.numLoaded+" / "+b.numTotal+" (failed: "+b.numFailed+")"),!b.firstRun&&b.numLoaded>=b.numTotal&&(x.log("Finished loading images: # "+b.numTotal+" (failed: "+b.numFailed+")"),"function"==typeof r.complete&&r.complete(b))}function i(t,o,i){var l,s,c=r.proxy;E.href=t,t=E.href,l="html2canvas_"+w++,i.callbackname=l,c+=c.indexOf("?")>-1?"&":"?",c+="url="+encodeURIComponent(t)+"&callback="+l,s=T.createElement("script"),e[l]=function(t){"error:"===t.substring(0,6)?(i.succeeded=!1,b.numLoaded++,b.numFailed++,a()):(p(o,i),o.src=t),e[l]=n;try{delete e[l]}catch(r){}s.parentNode.removeChild(s),s=null,delete i.script,delete i.callbackname},s.setAttribute("type","text/javascript"),s.setAttribute("src",c),i.script=s,e.document.body.appendChild(s)}function l(t,n){var r=e.getComputedStyle(t,n),o=r.content;"url"===o.substr(0,3)&&m.loadImage(d.Util.parseBackgroundImage(o)[0].args[0]),h(r.backgroundImage,t)}function s(e){l(e,":before"),l(e,":after")}function c(e,t){var r=d.Generate.Gradient(e,t);r!==n&&(b[e]={img:r,succeeded:!0},b.numTotal++,b.numLoaded++,a())}function u(e){return e&&e.method&&e.args&&e.args.length>0}function h(e,t){var r;d.Util.parseBackgroundImage(e).filter(u).forEach(function(e){"url"===e.method?m.loadImage(e.args[0]):e.method.match(/\-?gradient$/)&&(r===n&&(r=d.Util.Bounds(t)),c(e.value,r))})}function f(e){var t=!1;try{x.Children(e).forEach(f)}catch(r){}try{t=e.nodeType}catch(o){t=!1,x.log("html2canvas: failed to access some element's nodeType - Exception: "+o.message)}if(1===t||t===n){s(e);try{h(x.getCSS(e,"backgroundImage"),e)}catch(r){x.log("html2canvas: failed to get background-image - Exception: "+r.message)}h(e)}}function p(t,o){t.onload=function(){o.timer!==n&&e.clearTimeout(o.timer),b.numLoaded++,o.succeeded=!0,t.onerror=t.onload=null,a()},t.onerror=function(){if("anonymous"===t.crossOrigin&&(e.clearTimeout(o.timer),r.proxy)){var l=t.src;return t=new Image,o.img=t,t.src=l,i(t.src,t,o),n}b.numLoaded++,b.numFailed++,o.succeeded=!1,t.onerror=t.onload=null,a()}}var g,m,y,v,b={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},x=d.Util,w=0,C=r.elements[0]||t.body,T=C.ownerDocument,k=C.getElementsByTagName("img"),S=k.length,E=T.createElement("a"),I=function(e){return e.crossOrigin!==n}(new Image);for(E.href=e.location.href,g=E.protocol+E.host,m={loadImage:function(e){var t,a;e&&b[e]===n&&(t=new Image,e.match(/data:image\/.*;base64,/i)?(t.src=e.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),a=b[e]={img:t},b.numTotal++,p(t,a)):o(e)||r.allowTaint===!0?(a=b[e]={img:t},b.numTotal++,
p(t,a),t.src=e):I&&!r.allowTaint&&r.useCORS?(t.crossOrigin="anonymous",a=b[e]={img:t},b.numTotal++,p(t,a),t.src=e):r.proxy&&(a=b[e]={img:t},b.numTotal++,i(e,t,a)))},cleanupDOM:function(o){var i,l;if(!b.cleanupDone){o&&"string"==typeof o?x.log("html2canvas: Cleanup because: "+o):x.log("html2canvas: Cleanup after timeout: "+r.timeout+" ms.");for(l in b)if(b.hasOwnProperty(l)&&(i=b[l],"object"==typeof i&&i.callbackname&&i.succeeded===n)){e[i.callbackname]=n;try{delete e[i.callbackname]}catch(s){}i.script&&i.script.parentNode&&(i.script.setAttribute("src","about:blank"),i.script.parentNode.removeChild(i.script)),b.numLoaded++,b.numFailed++,x.log("html2canvas: Cleaned up failed img: '"+l+"' Steps: "+b.numLoaded+" / "+b.numTotal)}e.stop!==n?e.stop():t.execCommand!==n&&t.execCommand("Stop",!1),t.close!==n&&t.close(),b.cleanupDone=!0,o&&"string"==typeof o||a()}},renderingDone:function(){v&&e.clearTimeout(v)}},r.timeout>0&&(v=e.setTimeout(m.cleanupDOM,r.timeout)),x.log("html2canvas: Preload starts: finding background-images"),b.firstRun=!0,f(C),x.log("html2canvas: Preload: Finding images"),y=0;S>y;y+=1)m.loadImage(k[y].getAttribute("src"));return b.firstRun=!1,x.log("html2canvas: Preload: Done."),b.numTotal===b.numLoaded&&a(),m},d.Renderer=function(e,r){function o(e){function t(e){Object.keys(e).sort().forEach(function(n){var r=[],a=[],i=[],l=[];e[n].forEach(function(e){e.node.zIndex.isPositioned||1>e.node.zIndex.opacity?i.push(e):e.node.zIndex.isFloated?a.push(e):r.push(e)}),function s(e){e.forEach(function(e){l.push(e),e.children&&s(e.children)})}(r.concat(a,i)),l.forEach(function(e){e.context?t(e.context):o.push(e.node)})})}var r,o=[];return r=function(e){function t(e,r,o){var a="auto"===r.zIndex.zindex?0:Number(r.zIndex.zindex),i=e,l=r.zIndex.isPositioned,s=r.zIndex.isFloated,c={node:r},u=o;r.zIndex.ownStacking?(i=c.context={"!":[{node:r,children:[]}]},u=n):(l||s)&&(u=c.children=[]),0===a&&o?o.push(c):(e[a]||(e[a]=[]),e[a].push(c)),r.zIndex.children.forEach(function(e){t(i,e,u)})}var r={};return t(r,e),r}(e),t(r),o}function a(e){var t;if("string"==typeof r.renderer&&d.Renderer[e]!==n)t=d.Renderer[e](r);else{if("function"!=typeof e)throw Error("Unknown renderer");t=e(r)}if("function"!=typeof t)throw Error("Invalid renderer defined");return t}return a(r.renderer)(e,r,t,o(e.stack),d)},d.Util.Support=function(e,t){function r(){var e=new Image,r=t.createElement("canvas"),o=r.getContext===n?!1:r.getContext("2d");if(o===!1)return!1;r.width=r.height=10,e.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{o.drawImage(e,0,0),r.toDataURL()}catch(a){return!1}return d.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}function o(){var e,n,r,o,a=!1;return t.createRange&&(e=t.createRange(),e.getBoundingClientRect&&(n=t.createElement("boundtest"),n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n),r=e.getBoundingClientRect(),o=r.height,123===o&&(a=!0),t.body.removeChild(n))),a}return{rangeBounds:o(),svgRendering:e.svgRendering&&r()}},e.html2canvas=function(t,n){t=t.length?t:[t];var r,o,a={logging:!1,elements:t,background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,width:null,height:null,taintTest:!0,renderer:"Canvas"};return a=d.Util.Extend(n,a),d.logging=a.logging,a.complete=function(e){("function"!=typeof a.onpreloaded||a.onpreloaded(e)!==!1)&&(r=d.Parse(e,a),("function"!=typeof a.onparsed||a.onparsed(r)!==!1)&&(o=d.Renderer(r,a),"function"==typeof a.onrendered&&a.onrendered(o)))},e.setTimeout(function(){d.Preload(a)},0),{render:function(e,t){return d.Renderer(e,d.Util.Extend(t,a))},parse:function(e,t){return d.Parse(e,d.Util.Extend(t,a))},preload:function(e){return d.Preload(d.Util.Extend(e,a))},log:d.Util.log}},e.html2canvas.log=d.Util.log,e.html2canvas.Renderer={Canvas:n},d.Renderer.Canvas=function(e){function r(e,t){e.beginPath(),t.forEach(function(t){e[t.name].apply(e,t.arguments)}),e.closePath()}function o(e){if(-1===l.indexOf(e.arguments[0].src)){c.drawImage(e.arguments[0],0,0);try{c.getImageData(0,0,1,1)}catch(t){return s=i.createElement("canvas"),c=s.getContext("2d"),!1}l.push(e.arguments[0].src)}return!0}function a(t,n){switch(n.type){case"variable":t[n.name]=n.arguments;break;case"function":switch(n.name){case"createPattern":if(n.arguments[0].width>0&&n.arguments[0].height>0)try{t.fillStyle=t.createPattern(n.arguments[0],"repeat")}catch(a){u.log("html2canvas: Renderer: Error creating pattern",a.message)}break;case"drawShape":r(t,n.arguments);break;case"drawImage":n.arguments[8]>0&&n.arguments[7]>0&&(!e.taintTest||e.taintTest&&o(n))&&t.drawImage.apply(t,n.arguments);break;default:t[n.name].apply(t,n.arguments)}}}e=e||{};var i=t,l=[],s=t.createElement("canvas"),c=s.getContext("2d"),u=d.Util,h=e.canvas||i.createElement("canvas");return function(e,t,r,o,i){var l,s,c,d=h.getContext("2d"),f=e.stack;return h.width=h.style.width=t.width||f.ctx.width,h.height=h.style.height=t.height||f.ctx.height,c=d.fillStyle,d.fillStyle=u.isTransparent(f.backgroundColor)&&t.background!==n?t.background:e.backgroundColor,d.fillRect(0,0,h.width,h.height),d.fillStyle=c,o.forEach(function(e){d.textBaseline="bottom",d.save(),e.transform.matrix&&(d.translate(e.transform.origin[0],e.transform.origin[1]),d.transform.apply(d,e.transform.matrix),d.translate(-e.transform.origin[0],-e.transform.origin[1])),e.clip&&(d.beginPath(),d.rect(e.clip.left,e.clip.top,e.clip.width,e.clip.height),d.clip()),e.ctx.storage&&e.ctx.storage.forEach(function(e){a(d,e)}),d.restore()}),u.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===t.elements.length&&"object"==typeof t.elements[0]&&"BODY"!==t.elements[0].nodeName?(s=i.Util.Bounds(t.elements[0]),l=r.createElement("canvas"),l.width=Math.ceil(s.width),l.height=Math.ceil(s.height),d=l.getContext("2d"),d.drawImage(h,s.left,s.top,s.width,s.height,0,0,s.width,s.height),h=null,l):h}}})(window,document),angular.module("hefesoft.google").service("driveApiUpload",function(e){function t(e){return gapi.client.drive.files.insert({resource:{title:e,mimeType:"application/vnd.google-apps.folder"}})}function n(e){var n="title='"+e+"'",r="mimeType = 'application/vnd.google-apps.folder' and "+n+" and trashed = false";return gapi.client.drive.files.list({q:r}).then(function(n){var r=n.result.items;return r.length?r[0]:t(e).then(function(e){return e.result})})}function r(t,n,r){var o=e.defer(),a="-------314159265358979323846",i="\r\n--"+a+"\r\n",l="\r\n--"+a+"--",s=t.type||"application/octet-stream",c={title:n,mimeType:s,parents:[{id:r}]},u=btoa(t.content),d=i+"Content-Type: application/json\r\n\r\n"+JSON.stringify(c)+i+"Content-Type: "+s+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+u+l,h=gapi.client.request({path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="'+a+'"'},body:d});return h.then(function(e){o.resolve(e.result)},function(e){o.reject(e)}),o.promise}function o(t,n,r,o){o&&(t=l(t));var a=e.defer(),i="-------314159265358979323846",s="\r\n--"+i+"\r\n",c="\r\n--"+i+"--",u=new FileReader;return u.readAsBinaryString(t),u.onload=function(e){var o=t.type||"application/octet-stream",l={title:n,mimeType:o,parents:[{id:r}]},d=btoa(u.result),h=s+"Content-Type: application/json\r\n\r\n"+JSON.stringify(l)+s+"Content-Type: "+o+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+d+c,f=gapi.client.request({path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="'+i+'"'},body:h});f.then(function(e){a.resolve(e.result)},function(e){a.reject(e)})},a.promise}function a(t){var n=e.defer();return gapi.client.request({path:"/drive/v2/files/"+t,method:"GET"}).then(function(){n.resolve()},function(){setTimeout(function(){a(t).then(function(){n.resolve()},function(e){n.reject(e)})},1e3)}),n.promise}function i(e){return gapi.client.drive.permissions.insert({fileId:e.id,resource:{withLink:!0,role:"reader",type:"anyone"}})}function l(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return new Blob([r],{type:n})}var s={};return s.insertFile=function(e,t,l,s,c){return gapi.client.load("drive","v2").then(function(){return n(c)}).then(function(n){return s?r(e,t,n.id,l):o(e,t,n.id,l)}).then(function(e){return a(e.id).then(function(){return i(e).then(function(){return e})})})},s}),function(){"use strict";angular.module("angularFileInput",[]).directive("ngFileInput",["$compile","$http","$templateCache","$parse",function(e,t,n){return{restrict:"E",require:"?ngModel",scope:{callback:"&",mode:"@",tmpl:"="},template:'<input ng-hide="tmpl" type="file" />',link:function(r,o,a,i){function l(e){var t=e.split("data:")[1],n=t.split(";"),r=n[0]||"text/plain",o=n[1].split(","),a=o[0],i=o[1];return{mimetype:r,encoding:a,content:i}}function s(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){var n=e.target.result,o={};"data-url"==r.mode?o=l(n):o.content=n,o.name=t.name,o.size=t.size,r.content=o,r.callback({file:o}),i&&i.$setViewValue(o),r.$apply()},r.mode||(r.mode="data-url"),n["readAs"+u[r.mode]]&&n["readAs"+u[r.mode]](t)}}var c=o.find("input")[0],u={"array-buffer":"ArrayBuffer","binary-string":"BinaryString","data-url":"DataURL",text:"Text"};c.addEventListener("change",s,!1),r.tmpl&&t.get(r.tmpl,{cache:n}).then(function(t){var n=t.data,a=angular.element(n);a[0].onclick=function(){c.click()},e(a)(r),o.append(a)})}}}])}.call(this),angular.module("hefesoft.google").service("youtube",["$q",function(e){var t={};return t.loadApi=function(){var t=e.defer();return gapi.client.load("youtube","v3").then(function(){t.resolve()}),t.promise},t.search=function(t){var n=e.defer(),r=t,o=gapi.client.youtube.search.list({q:r,part:"snippet"});return o.execute(function(e){n.resolve(e.result)}),n.promise},t.playList=function(t){var n=e.defer(),r={playlistId:t,part:"snippet",maxResults:50},o=gapi.client.youtube.playlistItems.list(r);return o.execute(function(e){n.resolve(e.result)}),n.promise},t}]),angular.module("odontologiaApp").controller("videosCtrl",function(e,t){function n(){t.loadApi().then(function(){t.playList("PLc4ZtAvk4ejZkxCVetOmabqZ-AEBpn61u").then(function(t){e.list=[],e.list=t.items})})}e.list=[],e.reproduceVideo=function(e){var t=e.snippet.resourceId.videoId;hefesoft.util.ytPlayer.loadVideoById(t)},n()});var hefesoft=hefesoft;hefesoft.tutorial={},hefesoft.tutorial.inicializar=function(e){introJs().setOptions({nextLabel:"Siguiente",prevLabel:"Anterior",skipLabel:"Saltar",doneLabel:"Listo",skipLabel:"Salir"}).goToStep(e).oncomplete(function(e){}).onexit(function(e){}).onchange(function(e,t){}).onbeforechange(function(e,t){}).start()},angular.module("odontologiaApp").service("procedimientosService",function(e,t,n){function r(){var t=e.defer();Parse.Object.extend("Pocedimientos");return e.all([a.getFromGoogleSheet(),a.obtenerEsquema("Diagnostico.json")]).then(function(e){var n=e[0],r=e[1].data,a=o(r,n);Parse.Object.saveAll(a).then(function(e){t.resolve(e)},function(e,n){t.reject(n)})}),t.promise}function o(e,t){for(var r=[],o=0;o<t.length;o++){var a=t[o],i=angular.copy(e),l=a.codigo+" "+a.tipo+" "+a.subtipo+" "+a.descripcion;i.nombre=l,i.arrayHefesoftTratamientos[0].nombre=l,i.arrayHefesoftTratamientos[0].valor=a.precio2,i.arrayHefesoftTratamientos[0].arrayHefesoftProcedimientos[0].nombre=l,i.arrayHefesoftTratamientos[0].arrayHefesoftProcedimientos[0].valor=a.precio2,"Letra"===a.tipoSimbolo?(i.diagnostico.objectHefesoftFuente.fuenteColor=a.valorDiagnostico,i.evolucion.objectHefesoftFuente.fuenteColor=a.valorEvolucion,i.diagnostico.simbolo=a.tipoValor,i.evolucion.simbolo=a.tipoValor):"Imagen"===a.tipoSimbolo?(delete i.diagnostico.objectHefesoftFuente,delete i.evolucion.objectHefesoftFuente,i.diagnostico.pathImagen=a.valorDiagnostico,i.evolucion.pathImagen=a.valorEvolucion):"Color"===a.tipoSimbolo&&(i.diagnostico.color=a.valorDiagnostico,i.evolucion.color=a.valorEvolucion);var s=n.addDiagnostico(i);r.push(s)}return r}var a={};return a.cargarDiagnosticosEjemplo=function(){var t=e.defer(),n=Parse.Object.extend("Diagnostico"),o=new Parse.Query(n);return o.equalTo("username",Parse.User.current().get("email")),o.count({success:function(e){0==e?r().then(function(e){t.resolve(e)}):t.resolve(e)},error:function(e){t.resolve(e)}}),t.promise},a.obtenerEsquema=function(e){return t.get("js/hefesoft/json/"+e)},a.getFromGoogleSheet=function(){var n=e.defer();return t.get("https://spreadsheets.google.com/feeds/list/1eTBT2zJir3ihr8sr4kE03z_nRXiklckTj0Y5q_s0VQY/od6/public/values?alt=json").then(function(e){var t=e.data.feed.entry;t=t.map(function(e,t){return{codigo:e.gsx$codigo.$t,tipo:e.gsx$tipo.$t,subtipo:e.gsx$subtipo.$t,descripcion:e.gsx$descripcion.$t,precioConFormato:e.gsx$precio.$t,precio2ConFormato:e.gsx$precio2.$t,precio:e.gsx$preciovalor.$t,precio2:e.gsx$precio2valor.$t,tipoSimbolo:e.gsx$tipo_2.$t,tipoValor:e.gsx$valortipo.$t,valorDiagnostico:e.gsx$valordiagnostico.$t,valorEvolucion:e.gsx$valorevolucion.$t,pais:e.gsx$pais.$t,anio:e.gsx$año.$t}}),n.resolve(t)}),n.promise},a}),angular.module("odontologiaApp").service("prestadorService",function(e,t){var n={};return n.list=function(){var t=e.defer(),r=Parse.Object.extend("Prestador"),o=new Parse.Query(r);return o.equalTo("username",Parse.User.current().get("email")),o.find().then(function(e){if(hefesoft.isEmpty(e)){var r=Parse.User.current().toJSON();n.save({email:r.email,nombre:r.email,especialidad:"",telefono:"",idCalendar:r.email,pictureUrl:r.pictureUrl}).then(function(e){var n=[];n.push(e),t.resolve(n)})}else t.resolve(e)},function(e,n){t.reject(n)}),t.promise},n.save=function(t){var n=e.defer(),r=Parse.Object.extend("Prestador"),o=new r;return t.objectId&&o.set("id",t.objectId),o.set("nombre",t.nombre),o.set("especialidad",t.especialidad),o.set("cedula",t.cedula),o.set("email",t.email),o.set("telefono",t.telefono),o.set("idCalendar",t.idCalendar),o.set("username",Parse.User.current().get("email")),hefesoft.isEmpty(t.pictureUrl)?o.set("pictureUrl",hefesoft.generoPic(t,"genero")):o.set("pictureUrl",t.pictureUrl),o.save().then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise},n.destroy=function(e){var t=Parse.Object.extend("Prestador"),n=new t;n.set("id",e),n.destroy()},n}),angular.module("odontologiaApp").controller("helpCtrl",function(e,t,n){function r(t,r,a,i,l){o=e.open({animation:t,templateUrl:l,controller:"helpModalCtrl",size:r,backdrop:a,keyboard:i,resolve:{content:function(){return n.modalContent}}})}var o;t.$on("openPopUp",function(e,t){r(!0,t.size,!0,!0,t.template)}),n.open=function(e,t){r(!0,e,!0,!0,t)}}).controller("helpModalCtrl",function(e,t,n){t.close=function(){n.dismiss()},e.$on("closePopUp",function(e,t){n.dismiss()})});